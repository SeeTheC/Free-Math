import React, { Component } from 'react';
import MathInput from './MathInput.js';

var KAS = window.KAS;

class ExprComparisonTests extends React.Component {
    state = { leftExpr: "", rightExpr : "", equals : false, matches : false};

    compareExprs = () => {
        console.log("left: " + this.state.leftExpr);
        console.log("right: " + this.state.rigthExpr);
        var leftParsed = KAS.parse(this.state.leftExpr).expr;
        var rightParsed = KAS.parse(this.state.rightExpr).expr;
        // TODO - also use this to test for transitivity and commutativity of these
        // comparison algorithms
        var matches = (KAS.compare(leftParsed, rightParsed).equal
                       && leftParsed.sameForm(rightParsed));
        this.setState({ ...this.state,
            equals: (this.state.leftExpr == this.state.rightExpr),
            matches: matches});
    };

    setLeftExpr = (expr) => {
        this.setState({ ...this.state, leftExpr: expr});
    };

    setRightExpr = (expr) => {
        this.setState({ ...this.state, rightExpr: expr});
    };

    render() {
        return (
        <div>
        equals: {this.state.equals + ""} &nbsp;&nbsp; matches: {this.state.matches + ""}
        <button onClick={function() {this.compareExprs()}.bind(this)}>Compare</button>
        <MathInput
                   buttonsVisible='focused'
                   buttonSets={['trig', 'prealgebra', 'logarithms', 'calculus']}
                   value={this.state.leftExpr}
                   onChange={function(value) {
                       this.setLeftExpr(value);
                   }.bind(this)}
                   />
        <MathInput
                        buttonsVisible='focused'
                        className="mathStepEditor"
                        style={{overflow: 'auto', marginTop: '8px'}}
                        buttonSets={['trig', 'prealgebra',
                                     'logarithms', 'calculus']}
                        buttonGroup={'BASIC','MATRIX', 'GEOMETRY', 'SET_THEORY', 'GREEK'}
                        //stepIndex={stepIndex}
                        ref={ (ref) => this.stepRef = ref }
                       // problemIndex={problemIndex} value={step[CONTENT]}
                        
                    />
        </div>
        );
    }
}

export default ExprComparisonTests;
